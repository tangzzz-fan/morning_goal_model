技术规划文档
我们已经完成了战略规划和产品定义（PRD）阶段。我们已经从投资人那里获得了清晰、严格的反馈，并且我们的产品方向已经确定。
现在，执行开始。
我们的工作将分为两个平行的冲刺轨道，为期 60 天。
1. 轨道一 (v0.1)：移动工程团队 (iOS/Android)。你们的目标是交付一个用于留存率验证的 Beta 版。你们必须严格遵循 v0.1 PRD，构建一个极简、100% 本地化的核心习惯循环。
2. 轨道二 (v2.0)：端侧 AI 团队 (ML/R&D)。你们的目标是交付一个用于可行性验证的原型。你们将证明我们的护城河——“个人 AI 教练”——在技术上是可行的，并且可以在 100% 隐私保护的前提下在端侧运行。
以下是你们各自的技术规划文档。


技术规划文档：v0.1 (留存率 Beta 版)

致： 移动工程团队 (iOS & Android)
发件人： 技术经理
日期： 2025 年 11 月 11 日
主题： 60 天冲刺计划 - "Morning Goal" v0.1 核心习惯循环

1. 主要目标

在 60 天内，交付一个可用于 1,000 人 Beta 测试的 v0.1 版 App。此版本的唯一目标是验证我们的核心假设：一个极简的、由“连续记录”(Streak) 驱动的习惯循环是否具有足够的粘性，以实现我们的 D30/D90 留存率目标。
你们的“北极星”是留存率，而不是功能数量。

2. 核心技术原则 (不可违背)

1. 100% 本地数据： 绝不构建账户系统。绝不构建服务器端 API。所有用户生成的内容（目标、日期）必须只存储在设备的本地数据库中（例如 Core Data/Realm/SQLite）。
2. 零摩擦体验 1： 我们的产品价值主张是“零阻力”。应用冷启动到可输入状态的时间必须低于 2 秒。
3. 严格的 Beta 版分析： v1.0 正式版将是 0 追踪。为了验证 v0.1 的留存率，我们将仅包含一个轻量级分析 SDK，并且必须：
    * 主动加入 (Opt-In)： 在新用户引导流程中明确告知用户，并获得其同意。
    * 完全匿名： 仅追踪一个匿名的安装 ID。
    * 仅限单一事件： 仅追踪“应用启动”事件。我们绝不追踪屏幕、按钮点击或（绝对禁止）任何文本输入。
    * 可移除性： 必须将此 SDK 封装，以便在 v1.0 中可以被一键彻底移除。

3. v0.1 功能规格 (源自 PRD)

你们的开发工作严格限制在 PRD 的 E1 到 E7 史诗中。
* 本地数据库模式：
    * GoalEntry 表：
        * date (Primary Key, e.g., 'YYYY-MM-DD')
        * goalText (String)
        * lastUpdated (Timestamp)
* 核心行动 (PRD E3)：
    * 启动 App。
    * IF GoalEntry WHERE date = today is NULL：显示主输入页（键盘自动弹出）。
    * ELSE：显示历史列表页。
    * 保存：自动保存（例如，当应用进入后台或用户导航离开时）到本地数据库。
* 核心反馈 - 连续记录 (PRD E5)：
    * Streak 逻辑： 这是 MVP 的关键。必须 100% 准确。
    * 逻辑：Streak = 从 today 向后连续计算 GoalEntry 表中未中断的天数。
    * UI 强化： 在保存今日目标后，Streak 计数器必须有一个即时、令人满足的“微交互”（例如，数字跳动），以提供即时强化 3。
    * 历史视图 (PRD E6)： 一个简单的、按时间倒序的列表 6。不要试图构建复杂的日历视图 8。
* 核心触发 - 提醒 (PRD E4)：
    * 新用户引导 (PRD E1)： 必须让用户设置“早晨窗口”（例如，开始时间 7:00 AM，结束时间 9:00 AM）12。将此设置存储在本地。
    * 本地通知逻辑： 每天在“早晨窗口”期间触发一次本地检查。
    * IF GoalEntry WHERE date = today is NULL：
        1. 主动推送： 发送一个本地推送通知（每天仅此一次）。文案必须是“轻推”(Nudge) 17，而非“唠叨”(Nag) 18。例如：“准备好设定今天的焦点了吗？”
        2. 被动角标： 将 App 角标设置为一个“点”（dot） 20。
    * IF GoalEntry WHERE date = today is NOT NULL：
        1. 清除所有角标。
* 承诺设备 (PRD E2)：
    * 在 Onboarding 最后一步，实现一个“长按 3 秒以承诺”的按钮。这是一种心理学上的投入，必须与 UX 团队紧密合作实现。

4. 60 天冲刺里程碑

* 周 1-3 (Sprint 1)： 核心循环开发。
    * 交付： 一个没有 UI 的骨架 App。功能包括：本地数据库、核心输入页（保存/编辑）、极简的历史列表页。
* 周 4-5 (Sprint 2)： 反馈与触发系统。
    * 交付： 实现 Streak 逻辑和计数器 UI。实现“早晨窗口”设置和本地通知（主动推送 + 被动角标）逻辑。
* 周 6 (Sprint 3)： 新用户体验。
    * 交付： 完成 Onboarding 流程、"承诺设备"按钮、以及 v0.1 特有的“匿名分析 Opt-In”屏幕。
* 周 7 (Sprint 4)： 打包与测试。
    * 交付： 完整的 v0.1 Beta 版。集成轻量级分析 SDK。准备 TestFlight 和 Firebase App Distribution 构建。
* 周 8： 内部 QA 与 Beta 启动。
    * 交付： 修复关键 Bug。将 v0.1 版推送到我们 GTM 策略招募的 1,000 名测试用户手中。开始收集 D30/D90 数据。


技术规划文档：v2.0 (端侧 AI 教练)

致： 端侧 AI/ML 团队
发件人： 技术经理
日期： 2025 年 11 月 11 日
主题： 60 天冲刺计划 - "v2.0 AI 教练" 可行性原型

1. 主要目标

在 60 天内，交付一个可工作的技术原型，证明我们 v2.0 的核心护城河——“隐私优先的个人 AI 教练”——是可行的和有价值的。
你们的交付成果将直接向投资人展示，必须回答两个问题：
1. 我们真的可以在 100% 端侧实现有意义的个人洞察吗？
2. 我们能避免被 Apple/Google 的系统级 AI（“Sherlocking”）商品化吗？

2. 核心技术原则 (不可违背)

1. 100% 端侧推理： 绝不妥协。所有分析和模型推理必须在用户设备上本地运行。
2. 战略上“反生成”： 我们的价值不在于生成或改写文本。这是 Apple 和 Google 正在解决的商品化问题。我们的价值在于分析和洞察用户自己的纵向数据，这是他们不敢触碰的领域。
3. 性能与电池优先： 我们的 AI 必须是“隐形”的。所有分析必须作为低优先级的后台任务运行，最好是在设备空闲和充电时进行，绝不能导致 UI 卡顿或电池明显消耗。
4. 硬件兼容性： 我们的模型必须足够轻量，以便能在 3-4 年前的中端设备上（例如 iPhone 12、配备 M1 的设备、同等 Android 设备）运行，而不仅仅是最新的 Pro 型号。

3. v2.0 原型规格 (60 天目标)

我们的目标是实现“洞察层次 1 和 2”：
* 层次 1：分类与统计 (v2.0 MVP)
    * 任务： 自动将每个 GoalEntry.goalText 分类到预定义的主题（例如：'工作', '健康', '家庭', '个人发展'）并进行基本的情感分析（'积极', '中性', '消极'）。
    * 用户洞察： “在过去 30 天里，你 40% 的目标与‘工作’相关。”
* 层次 2：相关性分析 (v2.0 核心)
    * 任务： 将（层次 1）的标签与 v0.1 团队正在构建的“连续记录”(Streak) 数据库进行关联。
    * 用户洞察： “我们注意到，当你记录与‘健康’相关的目标时，你当天的‘连续记录’保持率提高了 30%。” 4
* 层次 3：元认知反馈 (v2.1+ 愿景 - 60 天内不实现)
    * 任务： 分析目标的质量（例如，基于洛克理论 24 的“具体性” vs “模糊性”）。
    * 用户洞察： “当你设置具体目标（如‘跑步 3 公里’）时，你的连续记录中断率比设置模糊目标（如‘更健康’）时低 50%。”

4. 60 天冲刺里程碑

* 周 1-2 (Sprint 1)：Python 逻辑原型 (交付给投资人)
    * 任务： 这是你们的首要任务。 忽略端侧模型。
    * 产出： 1. 创建一个模拟的 90 天 goals.csv 文件。 2. 编写一个 Python 脚本，该脚本摄取此 CSV，执行（模拟的）层次 1 和 2 分析，并输出我们将向投资人展示的洞察性文本。
    * 目标： 证明我们的洞察逻辑本身是有价值的。
* 周 3-4 (Sprint 2)：技术选型“Bake-off” (iOS)
    * 任务： 在 iOS 上实现层次 1（主题分类）。
    * 产出： 一个内部测试 App，对比两种方法：
        1. A 方案： Apple 原生 Natural Language 框架（用于文本分类）。
        2. B 方案： 自定义 Core ML 模型（例如，一个在目标文本上微调过的轻量级 BERT 变体）。
    * 目标： 测量准确性、性能（毫秒）和对旧设备（iPhone 12/M1）的影响。
* 周 5-6 (Sprint 3)：技术选型“Bake-off” (Android)
    * 任务： 在 Android 上重复层次 1测试。
    * 产出： 一个内部测试 App，对比方法：
        1. A 方案： Google ML Kit 标准 API。
        2. B 方案： 自定义 TensorFlow Lite 模型。
        3. (R&D)：探索 Gemini Nano（如果可用）的零样本分类能力。
* 周 7-8 (Sprint 4)：原型集成与交付
    * 任务： 将（周 1-2 的）Python 逻辑与（周 3-6 的）获胜模型相结合。
    * 产出： 一个独立的、可在真实设备上运行的 v2.0 技术演示 App。
    * 目标： 向内部团队和投资人展示端到端的循环：App 在后台分析本地数据库，并主动在 UI 中呈现一个（层次 2）的洞察卡片。
我们有两个平行的冲刺，但只有一个共同的使命。移动团队负责让产品活过 60 天。AI 团队负责确保产品能活过未来 2 年。
开始行动。
